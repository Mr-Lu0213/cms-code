<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box box-primary">
                <!-- /.box-header -->
                <div class="box-body">
                    <table id="table" class="table table-bordered table-hover table-custom treeTable">
                        <form id="form-data" action="{:url('Config/configadd')}" method="post" >
                            <button type="button" class="btn btn-primary btn-sm create-button table_btn" >添加</button>
                        </form>

                        <thead>
                        <tr>
                            <th>编号</th>
                            <th>标题</th>
                            <th>字段名</th>
                            <th>值</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        {volist name="list" id="v"}
                        <tr id="node-{$v.id}" class="initialized parent_tr collapsed">

                            <td>{$v.id}</td>
                            <td>{$v.name}</td>
                            <td>{$v.key}</td>
                            <td>{$v.value}</td>
                            <td>
                                <a href="{:url('Config/configedit')}?id={$v.id}" >编辑&nbsp;&nbsp;</a>
                            </td>
                        </tr>
                        {/volist}
                        </tbody>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
        <!-- /.col -->
    </div>
</section>


<script>
    $(function () {

        $('#table').DataTable({
            'paging'      : true,
            'lengthChange': false,
            'info'        : false,
            'autoWidth'   : false,
            "stateSave"   : true,
            'ordering'    : true,
            "order"       : [[ 0, "desc" ]],
            'searching'   : true,
            "columnDefs"  :[
                {
                    "targets":[2,3,4],
                    "searchable":false
                }
            ],
            "language": datatable_lang,
            "dom": 'flrtip'
        })

    })

    $(".select2").change(function () {
        var data = $(this).serialize();
        window.location.href = "{:url('Config/config')}?"+data;

    })

    $('.create-button').click(function () {
        window.location.href = "{:url('Config/configEdit')}";
    })

</script>